# ToonDB Vector vs ChromaDB Benchmark Workload
# Tests vector insert and search performance against ChromaDB

[workload]
name = "vector_vs_chroma"
description = "Measures ToonDB vector performance vs ChromaDB and NumPy baseline"
runner = "python"
script = "comprehensive_benchmark.py"

[params]
# Vector parameters
dimension = 128
# Dataset sizes
n_vectors = 10000
n_queries = 100
# Search parameters
k = 10
# HNSW parameters  
max_connections = 16
ef_construction = 100
# ChromaDB batch size
chroma_batch_size = 5000
# Number of timed iterations
timed_iterations = 3
# Include baselines
include_numpy = true
include_sqlite_vss = true

[metrics]
collect = [
    # Insert metrics
    "toondb_insert_vec_per_s",
    "chromadb_insert_vec_per_s",
    "numpy_insert_vec_per_s",
    "sqlite_vss_insert_vec_per_s",
    # Search metrics
    "toondb_search_ms_avg",
    "chromadb_search_ms_avg",
    "numpy_search_ms_avg",
    "sqlite_vss_search_ms_avg",
    # Latency percentiles
    "toondb_search_ms_p50",
    "toondb_search_ms_p99",
    "chromadb_search_ms_p50",
    "chromadb_search_ms_p99",
    # QPS
    "toondb_qps",
    "chromadb_qps"
]

[thresholds]
toondb_insert_vec_per_s = { threshold = 5.0, better = "higher" }
chromadb_insert_vec_per_s = { threshold = 5.0, better = "higher" }
toondb_search_ms_avg = { threshold = 5.0, better = "lower" }
chromadb_search_ms_avg = { threshold = 5.0, better = "lower" }
toondb_search_ms_p50 = { threshold = 5.0, better = "lower" }
toondb_search_ms_p99 = { threshold = 10.0, better = "lower" }
toondb_qps = { threshold = 5.0, better = "higher" }
chromadb_qps = { threshold = 5.0, better = "higher" }
