# SQLite vs ToonDB 360Â° Comparison Workload
# Tests insert, point lookups, range scans, and batch operations

[workload]
name = "sqlite_vs_toondb_360"
description = "Comprehensive ToonDB vs SQLite comparison across all operation types"
runner = "rust"
binary = "perf-run"

[params]
# Dataset sizes
n_records = 100000
# Insert operations
single_insert_count = 10000
batch_sizes = [100, 1000, 10000]
# Lookup operations
point_lookup_count = 10000
# Scan operations
full_scan_iterations = 5
range_scan_count = 100
range_scan_size = 1000
# Concurrent operations
concurrent_readers = 4
# Number of timed iterations
timed_iterations = 5

[metrics]
collect = [
    # Insert metrics
    "toondb_single_insert_ops_per_s",
    "sqlite_single_insert_ops_per_s",
    "toondb_batch_insert_ops_per_s",
    "sqlite_batch_insert_ops_per_s",
    # Lookup metrics  
    "toondb_point_lookup_ops_per_s",
    "sqlite_point_lookup_ops_per_s",
    # Scan metrics
    "toondb_scan_rows_per_s",
    "sqlite_scan_rows_per_s",
    # Memory
    "toondb_peak_rss_mb",
    "sqlite_peak_rss_mb"
]

[thresholds]
toondb_single_insert_ops_per_s = { threshold = 5.0, better = "higher" }
sqlite_single_insert_ops_per_s = { threshold = 5.0, better = "higher" }
toondb_batch_insert_ops_per_s = { threshold = 5.0, better = "higher" }
sqlite_batch_insert_ops_per_s = { threshold = 5.0, better = "higher" }
toondb_point_lookup_ops_per_s = { threshold = 5.0, better = "higher" }
sqlite_point_lookup_ops_per_s = { threshold = 5.0, better = "higher" }
toondb_scan_rows_per_s = { threshold = 5.0, better = "higher" }
sqlite_scan_rows_per_s = { threshold = 5.0, better = "higher" }
toondb_peak_rss_mb = { threshold = 8.0, better = "lower" }
sqlite_peak_rss_mb = { threshold = 8.0, better = "lower" }
